{"version":3,"sources":["components/publicHeader.tsx","pages/home/contents.tsx","api/index.tsx","components/listView.tsx","pages/home/index.tsx"],"names":["PublicHeader","props","title","mode","icon","type","onLeftClick","console","log","rightContent","style","marginRight","tabBarTtems","key","picUrl","selectUrl","axios","defaults","timeout","interceptors","request","use","config","loading","err","hide","Promise","reject","response","res","info","List","useState","refreshing","setRefreshing","data","setData","init","a","params","param","get","useEffect","damping","height","document","documentElement","clientHeight","overflow","distanceToRefresh","getScrollContainer","indicator","direction","onRefresh","setTimeout","map","i","size","Header","current_node","extra","flow_name","Body","name","Footer","content","start_handler","time","id","Home","selectedTab","setSelectedTab","setTitle","weather","setWeather","position","setPosition","get_weather","timer","window","sessionStorage","getItem","location","JSON","parse","city","lng","lat","now","marqueeProps","loop","padding","obsTime","moment","format","text","temp","feelsLike","unselectedTintColor","tintColor","barTintColor","hidden","tabBarPosition","prerenderingSiblingsNumber","item","Item","width","background","selectedIcon","selected","onPress"],"mappings":"yQAsBeA,EAfwB,SAACC,GACvC,IAAQC,EAAUD,EAAVC,MACR,OACC,mBACCC,KAAK,OACLC,KAAM,mBAAMC,KAAK,SACjBC,YAAa,kBAAMC,QAAQC,IAAI,gBAC/BC,aAAc,CACb,mBAAcJ,KAAK,SAASK,MAAO,CAAEC,YAAa,SAAxC,MALZ,SAQET,K,kBCjBEU,EAAc,CAChB,CACIV,MAAO,qBACPW,IAAK,OACLC,OAAQ,mEACRC,UAAU,oEAEd,CACIb,MAAO,qBACPW,IAAK,WACLC,OAAQ,sEACRC,UAAU,uEAEd,CACIb,MAAO,qBACPW,IAAK,OACLC,OAAQ,mEACRC,UAAU,oEAEd,CACIb,MAAO,qBACPW,IAAK,WACLC,OAAQ,mEACRC,UAAU,qE,yJCrBlBC,IAAMC,SAASC,QAAU,IAGzBF,IAAMG,aAAaC,QAAQC,KAC1B,SAACC,GAEA,OADA,IAAMC,QAAQ,0DAAc,GACrBD,KAER,SAACE,GAEA,OADA,IAAMC,OACCC,QAAQC,OAAOH,MAIxBR,IAAMG,aAAaS,SAASP,KAC3B,SAACQ,GAGA,OAFMtB,QAAQC,IAAIqB,GAClB,IAAMJ,OACCI,KAER,SAACL,GAGA,OAFA,IAAMC,OACA,IAAMK,KAAK,gEAAe,GACzBJ,QAAQC,OAAOH,MAIxB,ICoCeO,EAvDgB,SAAC9B,GAC/B,MAAoC+B,oBAAS,GAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KACA,EAAwBF,mBAAqB,IAA7C,mBAAOG,EAAP,KAAaC,EAAb,KAEMC,EAAI,uCAAG,4BAAAC,EAAA,sEDeOC,ECdUtC,EAAMuC,MDcAxB,IAAMyB,IAAI,6DAA+DF,GCfhG,OACRJ,EADQ,OAEZC,EAAQD,EAAKA,MAFD,iCDeM,IAACI,ICfP,OAAH,qDAQV,OAJAG,qBAAU,WACTL,MACE,IAGF,8BACC,mBACCM,QAAS,GACTjC,MAAO,CACNkC,OAAQC,SAASC,gBAAgBC,aAAe,IAChDC,SAAU,QAEXC,kBAAmB,GACnBC,mBAAoB,aACpBC,UAAW,GACXC,UAAU,KACVnB,WAAYA,EACZoB,UAAW,WACVnB,GAAc,GACdoB,YAAW,WACVpB,GAAc,KACZ,MAfL,SAkBEC,EAAKoB,KAAI,SAACC,GAAD,OACT,oBAAWC,KAAK,KAAhB,UACC,mBAAYA,KAAK,OACjB,8BACC,kBAAMC,OAAN,CACCxD,MAAOsD,EAAEG,aACTC,MAAOJ,EAAEK,YAEV,kBAAMC,KAAN,UACEN,EAAEO,OAEJ,kBAAMC,OAAN,CACCC,QAAST,EAAEU,cACXN,MAAOJ,EAAEW,UAGX,mBAAYV,KAAK,SAfQD,EAAEY,YCoBlBC,UArDQ,WACtB,MAAsCrC,mBAAS,QAA/C,mBAAOsC,EAAP,KAAoBC,EAApB,KACA,EAA0BvC,mBAAS,kCAAnC,mBAAO9B,EAAP,KAAcsE,EAAd,KACA,EAA8BxC,mBAAqB,IAAnD,mBAAOyC,EAAP,KAAgBC,EAAhB,KACA,EAAgC1C,mBAAS,gEAAzC,mBAAO2C,EAAP,KAAiBC,EAAjB,KAKGlC,qBAAU,WACNmC,MACD,IACH,IHKUC,EGLJD,EAAW,uCAAG,gCAAAvC,EAAA,yDACZqC,EAAWI,OAAOC,eAAeC,QAAQ,YAD7B,wDAKVC,EAAWC,KAAKC,MAAMT,GAC5BC,EAAYM,EAASG,MANL,SFSJ9C,EEFgB2C,EAASI,IAAM,IAAMJ,EAASK,IFE3BvE,IAAMyB,IAAN,8DAAiEF,EAAjE,0CETf,OAOZJ,EAPY,OAQhBuC,EAAWvC,EAAKA,KAAKqD,KARL,iCFSL,IAACjD,IETI,OAAH,qDAUpB,OACC,gCACC,cAAC,EAAD,CAAcrC,MAAOA,IACZ,oBAAWuF,aAAc,CAAEC,MAAM,EAAMhF,MAAO,CAAEiF,QAAS,YAAzD,WHREb,EGSQL,EAAQmB,QHRnBC,IAAOf,GAAOgB,OAAO,+BGOpB,SAC6BnB,EAD7B,2BAC2CF,EAAQsB,KADnD,2BAC6DtB,EAAQuB,KADrE,2CACkFvB,EAAQwB,UAD1F,UAGT,mBACCC,oBAAoB,UACpBC,UAAU,UACVC,aAAa,QACbC,QAAQ,EACRC,eAAe,MACHC,2BAA4B,EANzC,SAQE3F,EAAY2C,KAAI,SAACiD,GAAD,OAChB,kBAAQC,KAAR,CACCvG,MAAOsG,EAAKtG,MAEME,KAAM,qBAAKM,MAAO,CAACgG,MAAO,OAAQ9D,OAAQ,OAAQ+D,WAAW,OAAD,OAASH,EAAK1F,OAAd,6CAC5D8F,aAAc,qBAAKlG,MAAO,CAACgG,MAAO,OAAQ9D,OAAQ,OAAQ+D,WAAW,OAAD,OAASH,EAAKzF,UAAd,6CACpE8F,SAAUvC,IAAgBkC,EAAK3F,IAC/BiG,QAAS,YAtCZ,SAACjG,EAAaX,GAC3BsE,EAAStE,EAAQ,gBACjBqE,EAAe1D,GAoCiBgG,CAASL,EAAK3F,IAAK2F,EAAKtG,QAN3D,SAQmB,cAAC,EAAD,CAAMsC,MAAOgE,EAAK3F,OAN/B2F,EAAK3F","file":"static/js/4.d4932eb1.chunk.js","sourcesContent":["import React from 'react'\r\nimport { NavBar, Icon } from 'antd-mobile'\r\n\r\ninterface params {\r\n\ttitle: string\r\n}\r\n\r\nconst PublicHeader: React.FC<params> = (props) => {\r\n\tconst { title } = props\r\n\treturn (\r\n\t\t<NavBar\r\n\t\t\tmode=\"dark\"\r\n\t\t\ticon={<Icon type=\"left\" />}\r\n\t\t\tonLeftClick={() => console.log('onLeftClick')}\r\n\t\t\trightContent={[\r\n\t\t\t\t<Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n\t\t\t]}\r\n\t\t>\r\n\t\t\t{title}\r\n\t\t</NavBar>\r\n\t)\r\n}\r\nexport default PublicHeader\r\n","import moment from 'moment';\r\nconst tabBarTtems = [\r\n    {\r\n        title: '待审批',\r\n        key: 'todo',\r\n        picUrl: 'https://zos.alipayobjects.com/rmsportal/sifuoDUQdAFKAVcFGROC.svg',\r\n        selectUrl:'https://zos.alipayobjects.com/rmsportal/iSrlOTqrKddqbOmlvUfq.svg',\r\n    },\r\n    {\r\n        title: '我发起',\r\n        key: 'category',\r\n        picUrl: 'https://gw.alipayobjects.com/zos/rmsportal/BTSsmHkPsQSPTktcXyTV.svg',\r\n        selectUrl:'https://gw.alipayobjects.com/zos/rmsportal/ekLecvKBnRazVLXbWOnE.svg',\r\n    },\r\n    {\r\n        title: '已审批',\r\n        key: 'cart',\r\n        picUrl: 'https://zos.alipayobjects.com/rmsportal/psUFoAMjkCcjqtUCNPxB.svg',\r\n        selectUrl:'https://zos.alipayobjects.com/rmsportal/IIRLrXXrFAhXVdhMWgUI.svg',\r\n    },\r\n    {\r\n        title: '已抄送',\r\n        key: 'concemed',\r\n        picUrl: 'https://zos.alipayobjects.com/rmsportal/asJMfBrNqpMMlVpeInPQ.svg',\r\n        selectUrl:'https://zos.alipayobjects.com/rmsportal/gjpzzcrPMkhfEqgbYvmN.svg',\r\n    },\r\n]\r\n\r\nconst time = (timer:string):string => {\r\n    return moment(timer).format('YYYY年MM月DD日')\r\n}\r\n\r\n\r\nexport { tabBarTtems, time }","import axios from 'axios'\r\nimport { Toast } from 'antd-mobile'\r\n// axios.defaults.baseURL = '/api';\r\naxios.defaults.timeout = 5000\r\n\r\n// 请求前拦截\r\naxios.interceptors.request.use(\r\n\t(config) => {\r\n\t\tToast.loading('拼命加载中，请稍后~', 0)\r\n\t\treturn config\r\n\t},\r\n\t(err) => {\r\n\t\tToast.hide()\r\n\t\treturn Promise.reject(err)\r\n\t}\r\n)\r\n// 返回后拦截\r\naxios.interceptors.response.use(\r\n\t(res) => {\r\n        console.log(res);\r\n\t\tToast.hide()\r\n\t\treturn res\r\n\t},\r\n\t(err) => {\r\n\t\tToast.hide()\r\n        Toast.info('服务器错误请稍后重试~', 2);\r\n\t\treturn Promise.reject(err)\r\n\t}\r\n)\r\n// 获取首页信息\r\nconst getHomeData = (params: any) => axios.get('https://5e528b14d90e6c00149913cf.mockapi.io/api/data?type=' + params)\r\n// 获取天气信息\r\nconst getWeather = (params: string) => axios.get(`https://devapi.qweather.com/v7/weather/now?location=${params}&key=00e4a28d1a1b4432a3e3769ce70afa0e`)\r\nexport { getHomeData, getWeather }\r\n","import React, { useState, useEffect } from 'react'\r\nimport { PullToRefresh, Card, WingBlank, WhiteSpace } from 'antd-mobile'\r\nimport { getHomeData } from '../api'\r\n\r\ninterface Params {\r\n\tparam: string\r\n}\r\ninterface DataType {\r\n\t[key: string]: string\r\n}\r\n\r\nconst List: React.FC<Params> = (props) => {\r\n\tconst [refreshing, setRefreshing] = useState(false)\r\n\tconst [data, setData] = useState<DataType[]>([])\r\n\r\n\tconst init = async () => {\r\n\t\tlet data = await getHomeData(props.param)\r\n\t\tsetData(data.data)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tinit()\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PullToRefresh\r\n\t\t\t\tdamping={60}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: document.documentElement.clientHeight - 131,\r\n\t\t\t\t\toverflow: 'auto',\r\n\t\t\t\t}}\r\n\t\t\t\tdistanceToRefresh={25}\r\n\t\t\t\tgetScrollContainer={() => undefined}\r\n\t\t\t\tindicator={{}}\r\n\t\t\t\tdirection=\"up\"\r\n\t\t\t\trefreshing={refreshing}\r\n\t\t\t\tonRefresh={() => {\r\n\t\t\t\t\tsetRefreshing(true)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetRefreshing(false)\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{data.map((i) => (\r\n\t\t\t\t\t<WingBlank size=\"lg\" key={i.id}>\r\n\t\t\t\t\t\t<WhiteSpace size=\"lg\" />\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<Card.Header\r\n\t\t\t\t\t\t\t\ttitle={i.current_node}\r\n\t\t\t\t\t\t\t\textra={i.flow_name}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t{i.name}\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t<Card.Footer\r\n\t\t\t\t\t\t\t\tcontent={i.start_handler}\r\n\t\t\t\t\t\t\t\textra={i.time}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t<WhiteSpace size=\"lg\" />\r\n\t\t\t\t\t</WingBlank>\r\n\t\t\t\t))}\r\n\t\t\t</PullToRefresh>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default List\r\n","import React, { useState, useEffect } from 'react'\r\nimport { TabBar, NoticeBar } from 'antd-mobile'\r\nimport PublicHeader from '../../components/publicHeader'\r\nimport { tabBarTtems, time } from './contents'\r\nimport List from '../../components/listView'\r\nimport { getWeather } from '../../api'\r\n\r\ninterface weatherObj {\r\n\t[key: string]: string\r\n}\r\n\r\nconst Home: React.FC = () => {\r\n\tconst [selectedTab, setSelectedTab] = useState('todo')\r\n\tconst [title, setTitle] = useState('待审批流程')\r\n\tconst [weather, setWeather] = useState<weatherObj>({})\r\n\tconst [position, setPosition] = useState('暂时无法获取位置信息')\r\n    const selected = (key: string, title: string): void => {\r\n        setTitle(title + '流程')\r\n        setSelectedTab(key)\r\n    }\r\n    useEffect(() => {\r\n        get_weather()\r\n    }, [])\r\n    const get_weather = async() => {\r\n        let position = window.sessionStorage.getItem('position')\r\n        if (!position) {\r\n            return\r\n        }\r\n        const location = JSON.parse(position)\r\n        setPosition(location.city)\r\n        let data = await getWeather(location.lng + ',' + location.lat)\r\n        setWeather(data.data.now)\r\n    }\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<PublicHeader title={title} />\r\n            <NoticeBar marqueeProps={{ loop: true, style: { padding: '0 7.5px' } }}>\r\n                {time(weather.obsTime)}，{position}，天气：{weather.text}，温度：{weather.temp}°，体感温度：{weather.feelsLike}°\r\n            </NoticeBar>\r\n\t\t\t<TabBar\r\n\t\t\t\tunselectedTintColor=\"#949494\"\r\n\t\t\t\ttintColor=\"#33A3F4\"\r\n\t\t\t\tbarTintColor=\"white\"\r\n\t\t\t\thidden={false}\r\n\t\t\t\ttabBarPosition=\"top\"\r\n                prerenderingSiblingsNumber={0}\r\n\t\t\t>\r\n\t\t\t\t{tabBarTtems.map((item) => (\r\n\t\t\t\t\t<TabBar.Item\r\n\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\tkey={item.key}\r\n                        icon={<div style={{width: '22px', height: '22px', background: `url(${item.picUrl}) center center /  21px 21px no-repeat`}}/>}\r\n                        selectedIcon={<div style={{width: '22px', height: '22px', background: `url(${item.selectUrl}) center center /  21px 21px no-repeat`}}/>}\r\n                        selected={selectedTab === item.key}\r\n                        onPress={() => {selected(item.key, item.title)}}\r\n\t\t\t\t\t>\r\n                        <List param={item.key}/>\r\n                    </TabBar.Item>\r\n\t\t\t\t))}\r\n\t\t\t</TabBar>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Home\r\n"],"sourceRoot":""}